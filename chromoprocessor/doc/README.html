<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
</head>
<body>
<h1 id="name">Name</h1>
<p>chromoprocessor.py</p>
<h1 id="description">Description</h1>
<p>Processes multiple BAM files by splitting each BAM file into its regions. Parallelizes a command similar to</p>
<pre><code>samtools mpileup 1.bam 2.bam [...] n.bam | java -jar VarScan &gt; out.vcf</code></pre>
<p>The resulting VCF files--one for each region--will be in <code>vcf/</code>.</p>
<h1 id="dependencies">Dependencies</h1>
<h2 id="python-modules">Python Modules</h2>
<ul>
<li><a href="https://pypi.python.org/pypi/pysam">pysam</a></li>
<li><p><a href="https://pypi.python.org/pypi/argparse">argparse</a></p>
<sub> * only if using a Python version &lt; 2.7 </sub></li>
<li><p><a href="https://pypi.python.org/pypi/futures">futures</a></p>
<p><sub> * only if using a Python version &lt; 3.0 </sub></p></li>
</ul>
<h1 id="synopsis">Synopsis</h1>
<pre><code>chromoprocessor file_names location action [-h] [--n-region] [--verbose | -v]</code></pre>
<h2 id="arguments">Arguments</h2>
<ul>
<li><code>file_names</code>: a file containing the names of the BAM files to process.</li>
<li><code>location</code>: the location of the VarScan jar.</li>
<li><code>action</code>: the action for VarScan to run.</li>
</ul>
<h2 id="options">Options</h2>
<ul>
<li><code>--n-region</code>: the number of regions to process in parallel. The default is two.</li>
<li><code>--verbose</code>: output additional information.</li>
</ul>
<h1 id="examples">Examples</h1>
<p>The easiset way to create the file with the name of the BAM files to process is with <code>ls</code> if you're going to call <code>chromoprocessor</code> from the same directory where the BAM files are, or with <code>find</code> otherwise, i.e <code>ls *.bam &gt; to_process.txt</code>. Of course, the name of the file is completely arbitrary and can be anything.</p>
<p>After the file is produced it's as simple as</p>
<pre><code>chromoprocessor to_process.txt /home/You/VarScan.jar mpileup2snp -v</code></pre>
<p>If you have the hardware and you would like the BAM files to be processed quicker, you can run more jobs in parallel</p>
<pre><code>chromoprocessor to_process.txt /home/You/VarScan.jar mpileup2snp -v --n-region=6</code></pre>
<h1 id="notes">Notes</h1>
<p>A <code>varscan.conf</code> and a <code>samtools.conf</code> are expected to be in the current working directory when the program is called. The files should contain the arguments and parameters you want to pass to VarScan and samtools respectively.</p>
<p>A very minimal example of <code>samtools.conf</code> will be</p>
<pre><code>-d
1000000</code></pre>
<p>And an example of <code>varscan.conf</code> will be</p>
<pre><code>--output-vcf
1
--p-value
0.2</code></pre>
</body>
</html>
